import{S as G,i as J,s as K,k as b,a as z,q as P,l as $,m as y,h as m,c as H,r as C,n as E,J as D,b as j,G as d,u as L,g as x,H as B,K as M,L as Q,e as O,d as V,f as T,o as le,v as W,M as R,N as re,y as X,z as Y,A as Z,B as ee}from"../chunks/index.4cec945a.js";import{f as q,S as se}from"../chunks/ArrowUp.svelte_svelte_type_style_lang.d5fc16c5.js";function ne(a){let e,t,r;return{c(){e=b("p"),t=P("FREE"),this.h()},l(l){e=$(l,"P",{class:!0});var s=y(e);t=C(s,"FREE"),s.forEach(m),this.h()},h(){E(e,"class","text-sm")},m(l,s){j(l,e,s),d(e,t)},i(l){r||M(()=>{r=Q(e,q,{}),r.start()})},o:B,d(l){l&&m(e)}}}function ae(a){let e,t,r;return{c(){e=b("p"),t=P("OCCUPIED"),this.h()},l(l){e=$(l,"P",{class:!0});var s=y(e);t=C(s,"OCCUPIED"),s.forEach(m),this.h()},h(){E(e,"class","text-sm")},m(l,s){j(l,e,s),d(e,t)},i(l){r||M(()=>{r=Q(e,q,{}),r.start()})},o:B,d(l){l&&m(e)}}}function oe(a){let e,t,r,l,s=a[0].name+"",_,v;function n(c,f){return c[0].occupied?ae:ne}let g=n(a),h=g(a);return{c(){e=b("div"),t=b("div"),r=z(),l=b("p"),_=P(s),v=z(),h.c(),this.h()},l(c){e=$(c,"DIV",{class:!0});var f=y(e);t=$(f,"DIV",{class:!0}),y(t).forEach(m),r=H(f),l=$(f,"P",{class:!0});var w=y(l);_=C(w,s),w.forEach(m),v=H(f),h.l(f),f.forEach(m),this.h()},h(){E(t,"class","flipper absolute w-full h-full -z-10 svelte-164a57p"),D(t,"bg-primary",!a[0].occupied),D(t,"bg-error",a[0].occupied),D(t,"occupied",a[0].occupied),E(l,"class","text-lg font-bold"),E(e,"class","rounded-lg px-8 py-16 flex flex-col items-center justify-center w-full relative overflow-hidden")},m(c,f){j(c,e,f),d(e,t),d(e,r),d(e,l),d(l,_),d(e,v),h.m(e,null)},p(c,[f]){f&1&&D(t,"bg-primary",!c[0].occupied),f&1&&D(t,"bg-error",c[0].occupied),f&1&&D(t,"occupied",c[0].occupied),f&1&&s!==(s=c[0].name+"")&&L(_,s),g!==(g=n(c))&&(h.d(1),h=g(c),h&&(h.c(),x(h,1),h.m(e,null)))},i(c){x(h)},o:B,d(c){c&&m(e),h.d()}}}function ie(a,e,t){let{spot:r}=e;return a.$$set=l=>{"spot"in l&&t(0,r=l.spot)},[r]}class ce extends G{constructor(e){super(),J(this,e,ie,oe,K,{spot:0})}}function U(a,e,t){const r=a.slice();return r[5]=e[t],r}function fe(a){var N;let e,t,r,l,s,_,v=((N=a[1])==null?void 0:N.parking_fee)+"",n,g,h,c,f,w,I=a[2],i=[];for(let o=0;o<I.length;o+=1)i[o]=A(U(a,I,o));const te=o=>V(i[o],1,1,()=>{i[o]=null});return{c(){e=b("div"),t=b("h1"),r=P("Current parking layout"),l=z(),s=b("h2"),_=P("Parking fees: "),n=P(v),g=P(" rs. / minute"),h=z(),c=b("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var u=y(e);t=$(u,"H1",{class:!0});var k=y(t);r=C(k,"Current parking layout"),k.forEach(m),l=H(u),s=$(u,"H2",{class:!0});var p=y(s);_=C(p,"Parking fees: "),n=C(p,v),g=C(p," rs. / minute"),p.forEach(m),h=H(u),c=$(u,"DIV",{class:!0});var S=y(c);for(let F=0;F<i.length;F+=1)i[F].l(S);S.forEach(m),u.forEach(m),this.h()},h(){E(t,"class","text-3xl"),E(s,"class","text-xl"),E(c,"class","grid grid-cols-3 gap-16 w-1/2"),E(e,"class","flex flex-col gap-8 items-center mx-auto my-16")},m(o,u){j(o,e,u),d(e,t),d(t,r),d(e,l),d(e,s),d(s,_),d(s,n),d(s,g),d(e,h),d(e,c);for(let k=0;k<i.length;k+=1)i[k]&&i[k].m(c,null);w=!0},p(o,u){var k;if((!w||u&2)&&v!==(v=((k=o[1])==null?void 0:k.parking_fee)+"")&&L(n,v),u&4){I=o[2];let p;for(p=0;p<I.length;p+=1){const S=U(o,I,p);i[p]?(i[p].p(S,u),x(i[p],1)):(i[p]=A(S),i[p].c(),x(i[p],1),i[p].m(c,null))}for(W(),p=I.length;p<i.length;p+=1)te(p);T()}},i(o){if(!w){for(let u=0;u<I.length;u+=1)x(i[u]);M(()=>{w&&(f||(f=R(e,q,{},!0)),f.run(1))}),w=!0}},o(o){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)V(i[u]);f||(f=R(e,q,{},!1)),f.run(0),w=!1},d(o){o&&m(e),re(i,o),o&&f&&f.end()}}}function ue(a){let e,t,r;return t=new se({props:{size:48}}),{c(){e=b("div"),X(t.$$.fragment),this.h()},l(l){e=$(l,"DIV",{class:!0});var s=y(e);Y(t.$$.fragment,s),s.forEach(m),this.h()},h(){E(e,"class","w-screen h-screen flex justify-center items-center")},m(l,s){j(l,e,s),Z(t,e,null),r=!0},p:B,i(l){r||(x(t.$$.fragment,l),r=!0)},o(l){V(t.$$.fragment,l),r=!1},d(l){l&&m(e),ee(t)}}}function A(a){let e,t;return e=new ce({props:{spot:a[5]}}),{c(){X(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,l){Z(e,r,l),t=!0},p(r,l){const s={};l&4&&(s.spot=r[5]),e.$set(s)},i(r){t||(x(e.$$.fragment,r),t=!0)},o(r){V(e.$$.fragment,r),t=!1},d(r){ee(e,r)}}}function pe(a){let e,t,r,l;const s=[ue,fe],_=[];function v(n,g){return n[0]?1:0}return e=v(a),t=_[e]=s[e](a),{c(){t.c(),r=O()},l(n){t.l(n),r=O()},m(n,g){_[e].m(n,g),j(n,r,g),l=!0},p(n,[g]){let h=e;e=v(n),e===h?_[e].p(n,g):(W(),V(_[h],1,1,()=>{_[h]=null}),T(),t=_[e],t?t.p(n,g):(t=_[e]=s[e](n),t.c()),x(t,1),t.m(r.parentNode,r))},i(n){l||(x(t),l=!0)},o(n){V(t),l=!1},d(n){_[e].d(n),n&&m(r)}}}function _e(a,e,t){let r=!1,l,s=[];le(()=>{_();let n=setInterval(v,1e3);return()=>clearInterval(n)});async function _(){const n=await fetch("/api/config");t(1,l=await n.json())}async function v(){const n=await fetch("/api/spots/list");t(2,s=await n.json()),t(0,r=!0)}return[r,l,s]}class me extends G{constructor(e){super(),J(this,e,_e,pe,K,{})}}export{me as default};
