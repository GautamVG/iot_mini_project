import{S as dt,i as pt,s as mt,e as ft,b as J,d as Q,f as st,g as R,h as f,o as vt,v as ot,k as v,q as $,a as w,l as b,m as k,r as H,c as S,n as F,G as a,K as it,M as nt,y as bt,z as kt,A as Et,H as rt,B as gt,L as yt,N as Tt,P as Pt,u as Y,Q as Dt}from"../chunks/index.4cec945a.js";import{S as $t,f as lt}from"../chunks/ArrowUp.svelte_svelte_type_style_lang.d5fc16c5.js";function _t(s,t,l){const e=s.slice();return e[3]=t[l],e}function wt(s){let t,l,e,r,c,n,E,i;const T=[At,St],p=[];function B(m,g){return m[1].length==0?0:1}return c=B(s),n=p[c]=T[c](s),{c(){t=v("div"),l=v("h1"),e=$("Pay up"),r=w(),n.c(),this.h()},l(m){t=b(m,"DIV",{class:!0});var g=k(t);l=b(g,"H1",{class:!0});var P=k(l);e=H(P,"Pay up"),P.forEach(f),r=S(g),n.l(g),g.forEach(f),this.h()},h(){F(l,"class","text-3xl"),F(t,"class","flex flex-col gap-8 items-center mx-auto my-16")},m(m,g){J(m,t,g),a(t,l),a(l,e),a(t,r),p[c].m(t,null),i=!0},p(m,g){let P=c;c=B(m),c===P?p[c].p(m,g):(ot(),Q(p[P],1,1,()=>{p[P]=null}),st(),n=p[c],n?n.p(m,g):(n=p[c]=T[c](m),n.c()),R(n,1),n.m(t,null))},i(m){i||(R(n),it(()=>{i&&(E||(E=nt(t,lt,{},!0)),E.run(1))}),i=!0)},o(m){Q(n),E||(E=nt(t,lt,{},!1)),E.run(0),i=!1},d(m){m&&f(t),p[c].d(),m&&E&&E.end()}}}function Ht(s){let t,l,e;return l=new $t({props:{size:48}}),{c(){t=v("div"),bt(l.$$.fragment),this.h()},l(r){t=b(r,"DIV",{class:!0});var c=k(t);kt(l.$$.fragment,c),c.forEach(f),this.h()},h(){F(t,"class","w-screen h-screen flex justify-center items-center")},m(r,c){J(r,t,c),Et(l,t,null),e=!0},p:rt,i(r){e||(R(l.$$.fragment,r),e=!0)},o(r){Q(l.$$.fragment,r),e=!1},d(r){r&&f(t),gt(l)}}}function St(s){let t,l,e,r,c,n,E,i,T,p,B,m,g,P,C,j,V,L,N,O,G,q,M,I,K,z,D=s[1],u=[];for(let o=0;o<D.length;o+=1)u[o]=ut(_t(s,D,o));const W=o=>Q(u[o],1,1,()=>{u[o]=null});return{c(){t=v("table"),l=v("thead"),e=v("tr"),r=v("th"),c=$("Parking Spot"),n=w(),E=v("th"),i=$("Start time"),T=w(),p=v("th"),B=$("End time"),m=w(),g=v("th"),P=$("Time parked"),C=w(),j=v("th"),V=$("Parking fees"),L=w(),N=v("th"),O=$("Amount"),G=w(),q=v("th"),M=w(),I=v("tbody");for(let o=0;o<u.length;o+=1)u[o].c();this.h()},l(o){t=b(o,"TABLE",{class:!0});var _=k(t);l=b(_,"THEAD",{});var h=k(l);e=b(h,"TR",{});var y=k(e);r=b(y,"TH",{});var A=k(r);c=H(A,"Parking Spot"),A.forEach(f),n=S(y),E=b(y,"TH",{});var d=k(E);i=H(d,"Start time"),d.forEach(f),T=S(y),p=b(y,"TH",{});var X=k(p);B=H(X,"End time"),X.forEach(f),m=S(y),g=b(y,"TH",{});var Z=k(g);P=H(Z,"Time parked"),Z.forEach(f),C=S(y),j=b(y,"TH",{});var x=k(j);V=H(x,"Parking fees"),x.forEach(f),L=S(y),N=b(y,"TH",{});var tt=k(N);O=H(tt,"Amount"),tt.forEach(f),G=S(y),q=b(y,"TH",{});var at=k(q);at.forEach(f),y.forEach(f),h.forEach(f),M=S(_),I=b(_,"TBODY",{});var et=k(I);for(let U=0;U<u.length;U+=1)u[U].l(et);et.forEach(f),_.forEach(f),this.h()},h(){F(t,"class","table w-3/4")},m(o,_){J(o,t,_),a(t,l),a(l,e),a(e,r),a(r,c),a(e,n),a(e,E),a(E,i),a(e,T),a(e,p),a(p,B),a(e,m),a(e,g),a(g,P),a(e,C),a(e,j),a(j,V),a(e,L),a(e,N),a(N,O),a(e,G),a(e,q),a(t,M),a(t,I);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(I,null);z=!0},p(o,_){if(_&2){D=o[1];let h;for(h=0;h<D.length;h+=1){const y=_t(o,D,h);u[h]?(u[h].p(y,_),R(u[h],1)):(u[h]=ut(y),u[h].c(),R(u[h],1),u[h].m(I,null))}for(ot(),h=D.length;h<u.length;h+=1)W(h);st()}},i(o){if(!z){for(let _=0;_<D.length;_+=1)R(u[_]);K||it(()=>{K=yt(t,lt,{}),K.start()}),z=!0}},o(o){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)Q(u[_]);z=!1},d(o){o&&f(t),Tt(u,o)}}}function At(s){let t,l;return{c(){t=v("p"),l=$("No receipts yet"),this.h()},l(e){t=b(e,"P",{class:!0});var r=k(t);l=H(r,"No receipts yet"),r.forEach(f),this.h()},h(){F(t,"class","text-lg")},m(e,r){J(e,t,r),a(t,l)},p:rt,i:rt,o:rt,d(e){e&&f(t)}}}function ut(s){let t,l,e=s[3].parking_spot_name+"",r,c,n,E=s[3].start_time+"",i,T,p,B=s[3].end_time+"",m,g,P,C=s[3].time_parked+"",j,V,L,N=s[3].parking_fee+"",O,G,q,M=s[3].amount+"",I,K,z,D,u,W,o,_,h,y;return{c(){t=v("tr"),l=v("td"),r=$(e),c=w(),n=v("td"),i=$(E),T=w(),p=v("td"),m=$(B),g=w(),P=v("td"),j=$(C),V=w(),L=v("td"),O=$(N),G=w(),q=v("td"),I=$(M),K=w(),z=v("td"),D=v("button"),u=$("Pay"),W=w(),this.h()},l(A){t=b(A,"TR",{});var d=k(t);l=b(d,"TD",{});var X=k(l);r=H(X,e),X.forEach(f),c=S(d),n=b(d,"TD",{});var Z=k(n);i=H(Z,E),Z.forEach(f),T=S(d),p=b(d,"TD",{});var x=k(p);m=H(x,B),x.forEach(f),g=S(d),P=b(d,"TD",{});var tt=k(P);j=H(tt,C),tt.forEach(f),V=S(d),L=b(d,"TD",{});var at=k(L);O=H(at,N),at.forEach(f),G=S(d),q=b(d,"TD",{});var et=k(q);I=H(et,M),et.forEach(f),K=S(d),z=b(d,"TD",{});var U=k(z);D=b(U,"BUTTON",{class:!0});var ct=k(D);u=H(ct,"Pay"),ct.forEach(f),U.forEach(f),W=S(d),d.forEach(f),this.h()},h(){F(D,"class","btn btn-primary")},m(A,d){J(A,t,d),a(t,l),a(l,r),a(t,c),a(t,n),a(n,i),a(t,T),a(t,p),a(p,m),a(t,g),a(t,P),a(P,j),a(t,V),a(t,L),a(L,O),a(t,G),a(t,q),a(q,I),a(t,K),a(t,z),a(z,D),a(D,u),a(t,W),_=!0,h||(y=Pt(D,"click",function(){Dt(ht(s[3].id))&&ht(s[3].id).apply(this,arguments)}),h=!0)},p(A,d){s=A,(!_||d&2)&&e!==(e=s[3].parking_spot_name+"")&&Y(r,e),(!_||d&2)&&E!==(E=s[3].start_time+"")&&Y(i,E),(!_||d&2)&&B!==(B=s[3].end_time+"")&&Y(m,B),(!_||d&2)&&C!==(C=s[3].time_parked+"")&&Y(j,C),(!_||d&2)&&N!==(N=s[3].parking_fee+"")&&Y(O,N),(!_||d&2)&&M!==(M=s[3].amount+"")&&Y(I,M)},i(A){_||(it(()=>{_&&(o||(o=nt(t,lt,{},!0)),o.run(1))}),_=!0)},o(A){o||(o=nt(t,lt,{},!1)),o.run(0),_=!1},d(A){A&&f(t),A&&o&&o.end(),h=!1,y()}}}function Bt(s){let t,l,e,r;const c=[Ht,wt],n=[];function E(i,T){return i[0]?1:0}return t=E(s),l=n[t]=c[t](s),{c(){l.c(),e=ft()},l(i){l.l(i),e=ft()},m(i,T){n[t].m(i,T),J(i,e,T),r=!0},p(i,[T]){let p=t;t=E(i),t===p?n[t].p(i,T):(ot(),Q(n[p],1,1,()=>{n[p]=null}),st(),l=n[t],l?l.p(i,T):(l=n[t]=c[t](i),l.c()),R(l,1),l.m(e.parentNode,e))},i(i){r||(R(l),r=!0)},o(i){Q(l),r=!1},d(i){n[t].d(i),i&&f(e)}}}function ht(s){return async()=>{const t=await fetch(`/api/receipts/pay?id=${s}`);if(t.status==200)alert("Payed Succeessfully");else{const l=(await t.json()).description;alert("There was an issue "+l)}}}function Nt(s,t,l){let e=!1,r=[];vt(()=>{let n=setInterval(c,1e3);return()=>clearInterval(n)});async function c(){let n=await fetch("/api/receipts/list_payable");l(1,r=await n.json()),l(0,e=!0)}return[e,r]}class qt extends dt{constructor(t){super(),pt(this,t,Nt,Bt,mt,{})}}export{qt as default};
